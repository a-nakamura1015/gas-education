---
title: "処理を繰り返し行う"
date: 2020-08-10T13:43:49+09:00
pre: "<b>2. </b>"
weight: 2
---
## while文
唐突ですが、「1から10の数値を加算した結果を求めるスクリプトを書いてみましょう！」となったとき、どのようにコーディングしますか？
ここまで学習してきた皆さんであれば、下記のようにコーディングすることができると思います。

```js
var num = 0;
num += 1;
num += 2;
~
num += 10;
```
そして、コーディングの途中で「これ同じことを繰り返していない？」と気づくと思います。

繰り返す処理の数だけ行数を増えていき、コーディングをするのも大変ですし、後々コードを修正するときも大変でうs。

実際にプログラミングをしているとこのように同じ処理を繰り返す場面が多々あります。

実は、JavaScriptには繰り返し処理を実現する構文を用意されています。

そのうちの1つが ***while文*** です。
while文は条件式を用いた繰り返しを実現することができます。

```js
while (条件式) {
  // 条件式がtrueの間は実行される処理
}
```

while文を使いますと、条件式の結果がtrueの間はブロック内の処理を繰り返し実行し、条件式がfalseになったときにループ処理から抜けます。

下記のサンプルを実行して、while文の処理の流れを確認しましょう。
```js
function outputLoop() {
  var x = 1;
  var sum = 0;
  while(x <= 10) {
    sum += x;
    x++;
  }
  console.log(sum);
}
```
```
55
```
#### 無限ループ
繰り返し処理を行う際には ***無限ループ*** に気をつける必要があります。

下記のサンプルを実行すると無限ループが発生します。
```js
function outputLoop_2() {
  var x = 1;
  var sum = 0;
  while(x <= 10) {
    sum += x;
  }
  console.log(sum);
}
```
このサンプルを実行するとスクリプトエディタの上部に「関数outLoop_2を実行中...」というメッセージが表示されたまま処理が完了しません。

このサンプルは変数xを初期化して1を代入していますが、while文の条件式が`x <= 10`となっているのにもかかわらず変数xが更新されずにずっと1のままのため、while文の中をグルグル回り続けてしまっています。

このように、while文の条件式がfalseとなることがなく、永遠に同じループが繰り返されてしまう状態を無限ループといいます。

GASでは無限ループが発生した場合は「関数〇〇を実行中...」に続く、キャンセルをクリックすることでスクリプトを停止させることができます。

繰り返し処理をコーディングする際は、必ずループが終了するようになっているかを確認するようにしましょう。

{{% notice warning %}}
while文による繰り返しでは無限ループに気を付けましょう。
{{% /notice %}}

---
## for文
while文は条件式がtrueの間は処理を繰り返すという構文でしたが、処理を繰り返す回数があらかじめ決まっているのであれば ***for文*** を使用しましょう。
```js
for (カウンタ変数の初期化; 条件式; 増減式) {
  // 条件式がtrueの間は実行される処理
}
```
for文では ***カウンタ変数*** と呼ばれる変数を用います。

for文を使用すると決められた回数の繰り返し処理をとてもシンプルにコーディングすることができます。

次のサンプルを実行してfor文の処理の流れを確認しましょう。
```js
function outputLoop_3() {
  var sum = 0;
  for (var x = 1; index <= 10; x++) {
    sum += x;
  }
  console.log(sum);
}
```
```
55
```
